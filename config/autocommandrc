" {{{ doJump
augroup doJump
    autocmd!
    " The following to have Vim jump to the last position when reopening a file
    autocmd BufReadPost * if line("'\"") > 0 && line("'\"") <= line("$")
                \ | execute "normal g'\"" | endif
augroup END
"}}}

" {{{ loadDictionary
augroup loadDictionary
    autocmd!
    " automatically load dictionaries for known syntaxes
    autocmd FileType * execute "setlocal dictionary+="
                \ . $VIMRUNTIME . "/syntax/" . &filetype . ".vim"
augroup END
"}}}

" {{{ loadOmniFunc
augroup loadOmniFunc
    autocmd!
    autocmd FileType * setlocal omnifunc=syntaxcomplete#Complete
    autocmd FileType c setlocal omnifunc=ccomplete#Complete
    autocmd FileType css setlocal omnifunc=csscomplete#CompleteCSS
    autocmd FileType javascript setlocal omnifunc=javascriptcomplete#CompleteJS
    autocmd FileType sql setlocal omnifunc=sqlcomplete#Complete
augroup END
"}}}

" {{{ loadFoldMethod
augroup loadFoldMethod
    autocmd!
    autocmd FileType c setlocal foldmethod=syntax
    autocmd FileType javascript setlocal foldmethod=syntax
    autocmd FileType sql setlocal foldmethod=syntax
augroup END
"}}}

" {{{ pluginConf
" don't load certain plugins depending on filetype
augroup pluginConf
    autocmd!
    autocmd FileType mail let g:loaded_AutoClose=1
augroup END
"}}}

" {{{ filetype specific autocommands       
augroup filetypes
    autocmd!
    autocmd! BufRead,BufNewFile *.phtml setlocal filetype=php.html
    autocmd! BufRead,BufNewFile *.xml.dist setlocal filetype=xml
    autocmd! BufRead,BufNewFile Vagrantfile setlocal filetype=ruby

    autocmd! FileType c,cpp,html,html.javascript,java,php,php.html,php.html.javascript,python,sh,tex,vim,xml
                \ let g:DeleteTrailingWhitespace = 1

    " simple filetypes
    autocmd! FileType c,cpp,html,java,php,sh,tex,vim,xml
                \ autocmd BufWritePre,FileWritePre * :call StripDoubleEmptyLines()

    " combined filetype
    autocmd! FileType html.javascript,php.html,php.html.javascript
                \ autocmd BufWritePre,FileWritePre * :call StripDoubleEmptyLines()
augroup END
"}}}

" {{{ PHP Unit
augroup phpunit
    autocmd! BufRead,BufNewFile,BufWinEnter *Test.php
                \ setfiletype php.phpunit
    autocmd! BufRead,BufNewFile,BufWinEnter *OutputTest.php
                \ setfiletype php.phpunit_output_testcase
    autocmd! BufRead,BufNewFile,BufWinEnter *WebTest.php
                \ setfiletype php.phpunit_selenium_testcase
augroup END
" }}}

" vim: filetype=vim textwidth=80 foldmethod=marker
